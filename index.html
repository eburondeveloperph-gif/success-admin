function pauseTeacherMicForTTS() {
    if (!this.recognition || !this.state.isMicActive) return;
    this.ttsPausedMic = true;
    try {
        this.recognition.stop();
    } catch (e) { 
        console.log('Recognition already stopped', e);
    }
}

function resumeTeacherMicAfterTTS() {
    if (!this.ttsPausedMic) return;
    this.ttsPausedMic = false;
    if (this.state.isMicActive && this.recognition) {
        try {
            this.recognition.start();
        } catch (e) {
            console.log('Could not resume recognition', e);
        }
    }
}

// Updating playAudio function
playAudio() {
    this.pauseTeacherMicForTTS();
    await audio.play();
}

// Strengthening deduplication logic in startWebSpeech
startWebSpeech() {
    this.recognition.onresult = (event) => {
        // Other result handling code
        if (this.teacherFinalSeen.size > 100) {
            const entries = Array.from(this.teacherFinalSeen.entries());
            entries.slice(0, 50).forEach(([key]) => this.teacherFinalSeen.delete(key));
        }
    };
}
// Adjusting duplicate detection time window for responsiveness
// Existing logic...
// Replace any occurrences of 1800ms with 500ms as needed.